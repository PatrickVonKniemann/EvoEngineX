@inject IJSRuntime JSRuntime

<div id="editor" class="w-full border border-gray-300" style="height: 400px" @ref="editorElement"></div>

@code {
    [Parameter] public string InitialCode { get; set; } = string.Empty;
    [Parameter] public EventCallback<string> OnCodeChange { get; set; }

    private ElementReference editorElement;

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JSRuntime.InvokeVoidAsync("createMonacoEditor", editorElement, new
            {
                value = InitialCode,
                language = "javascript",
                theme = "vs"
            });

            await JSRuntime.InvokeVoidAsync("monacoEditor.onDidChangeModelContent", DotNetObjectReference.Create(this));
        }
    }

    [JSInvokable]
    public async Task UpdateCode(string code)
    {
        InitialCode = code;
        await OnCodeChange.InvokeAsync(code);
    }
}