@using ClientApp.Services
@inject ToastService ToastService

<ErrorBoundary @ref="errorBoundary" OnAfterRenderAsync="CheckForErrors">
    <ChildContent>
        @ChildContent
    </ChildContent>
    <ErrorContent>
        <p>Oops! Something went wrong. Please try again later.</p>
        <button class="btn btn-warning" @onclick="ResetError">Try Again</button>
    </ErrorContent>
</ErrorBoundary>

@code {
    private ErrorBoundary? errorBoundary;

    [Parameter] public RenderFragment ChildContent { get; set; }

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        // Show a toast notification when an error occurs
        ToastService.ShowToast("An unexpected error occurred. Please try again later.", "error");
    }

    private void ResetError()
    {
        errorBoundary?.Recover();
    }

}